"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[21],{21:function(e,t,o){o.r(t),o.d(t,{default:function(){return ee}});var n=o(1413),s=o(5671),r=o(3144),i=o(136),a=o(4104),l=o(2791),u="Profile_content__DykmE",c=o(9439),d="ProfileInfo_info__KDdPV",h="ProfileInfo_descriptionBlock__5qaD8",m="ProfileInfo_changeAvatar__Zpx8Y",f="ProfileInfo_status__cYhuP",p="ProfileInfo_noStatus__uhond",x="ProfileInfo_modal__0mBfN",j="ProfileInfo_modalContent__86IY7",v="ProfileInfo_closeModalBtn__8+w7w",g=o(8210),b=o(184),P=function(e){var t=(0,l.useState)(!1),o=(0,c.Z)(t,2),n=o[0],s=o[1],r=(0,l.useState)(e.status),i=(0,c.Z)(r,2),a=i[0],u=i[1];(0,l.useEffect)((function(){u(e.status)}),[e.status]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{children:!n&&(0,b.jsx)("span",{className:e.status?f:p,onDoubleClick:function(){e.owner&&s(!0)},children:e.status&&e.owner?e.status:!e.status&&e.owner?"How you doing?":""})}),(0,b.jsx)("div",{children:n&&(0,b.jsx)("input",{className:f,onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!1),e.updateStatus(a)},value:a})})]})},_=o(1136),k=function(e){return e.contactValue?(0,b.jsxs)("div",{children:[(0,b.jsxs)("b",{children:[e.contactTitle,": "]}),e.contactValue]}):null},C="ProfileData_edit__-EDqJ",I="ProfileData_profileData__UqhRo",N=o(8875),y=function(e){return(0,b.jsxs)(b.Fragment,{children:[e.owner&&(0,b.jsx)("div",{className:C,children:(0,b.jsx)("button",{onClick:e.goToEditMode,children:(0,b.jsx)(N.J,{iconId:"edit",width:"35",height:"35"})})}),(0,b.jsxs)("div",{className:I,children:[(0,b.jsx)("h3",{children:"Info"}),(0,b.jsxs)("p",{children:[(0,b.jsx)("b",{children:"About me: "}),e.profile.aboutMe]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("b",{children:"Looking for a job: "}),e.profile.lookingForAJob?"\u2714\ufe0f":"\u274c"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("b",{children:"My professional skills: "}),e.profile.lookingForAJobDescription]}),Object.values(e.profile.contacts).filter((function(e){return""!==e&&null!==e})).length>0&&(0,b.jsx)("h3",{children:"Contacts:"}),Object.keys(e.profile.contacts).map((function(t){var o;return(0,b.jsx)(k,{contactTitle:t,contactValue:null===(o=e.profile)||void 0===o?void 0:o.contacts[t]},t)}))]})]})},B="ProfileDataForm_fieldError__SASL-",T="ProfileDataForm_error__TM2SS",w="ProfileDataForm_profileForm__dUKr+",F=o(5705),S=function(e){if(!e)return"This field is required"},M=function(e){if(e){return/\./.test(e)?void 0:"Enter correct URL"}},A=function(e){return(0,b.jsx)("div",{children:(0,b.jsx)(F.J9,{initialValues:e.profile,onSubmit:function(t,o){var n=o.setSubmitting,s={fullName:t.fullName,aboutMe:t.aboutMe,lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,contacts:{facebook:t.contacts.facebook,website:t.contacts.website,vk:t.contacts.vk,twitter:t.contacts.twitter,instagram:t.contacts.instagram,youtube:t.contacts.youtube,github:t.contacts.github,mainLink:t.contacts.mainLink}};n(!1),e.exitFromEditMode(s)},children:function(t){var o=t.values,n=t.handleChange,s=t.handleBlur,r=t.handleSubmit,i=t.isSubmitting,a=t.errors;return(0,b.jsxs)(F.l0,{onSubmit:r,className:w,children:[(0,b.jsxs)("label",{children:["Full name ",(0,b.jsx)(F.gN,{type:"text",name:"fullName",onChange:n,onBlur:s,value:o.fullName,className:a.fullName?a.fullName&&B:"",validate:S})]}),(0,b.jsxs)("label",{children:["About me ",(0,b.jsx)(F.gN,{type:"text",name:"aboutMe",onChange:n,onBlur:s,value:o.aboutMe,className:a.aboutMe?a.aboutMe&&B:"",validate:S})]}),(0,b.jsxs)("label",{children:["Looking for a job ",(0,b.jsx)(F.gN,{type:"checkbox",name:"lookingForAJob",checked:o.lookingForAJob})]}),(0,b.jsxs)("label",{children:["My professional skills ",(0,b.jsx)(F.gN,{type:"text",name:"lookingForAJobDescription",onChange:n,onBlur:s,value:o.lookingForAJobDescription,validate:S,className:a.lookingForAJobDescription?a.lookingForAJobDescription&&B:""})]}),Object.keys(e.profile.contacts).map((function(e){return(0,b.jsxs)("label",{children:["".concat(e)," ",(0,b.jsx)(F.gN,{type:"text",name:"contacts.".concat(e),onChange:n,onBlur:s,value:o.contacts[e],validate:M,className:a.contacts?a.contacts[e]&&B:""},e)]})})),a.contacts&&(0,b.jsx)("div",{className:T,children:"Enter correct URL"}),(a.lookingForAJobDescription||a.aboutMe||a.fullName)&&(0,b.jsx)("div",{className:T,children:"This field is required"}),(0,b.jsx)("div",{children:(0,b.jsx)("button",{type:"submit",disabled:i,children:"Save"})})]})}})})},D=function(e){var t,o,n=(0,l.useState)(!1),s=(0,c.Z)(n,2),r=s[0],i=s[1],a=(0,l.useState)(!1),u=(0,c.Z)(a,2),f=u[0],p=u[1];return e.profile?(0,b.jsx)("div",{className:d,children:(0,b.jsxs)("div",{className:h,children:[(0,b.jsxs)("div",{className:m,children:[(0,b.jsx)("img",{src:null!==(t=e.profile)&&void 0!==t&&t.photos.large?null===(o=e.profile)||void 0===o?void 0:o.photos.large:_,alt:"Profile"}),e.profile.userId===e.authId&&(0,b.jsx)("button",{onClick:function(){p(!0)},children:"Change photo"}),e.profile.userId===e.authId&&(0,b.jsx)("div",{children:f&&(0,b.jsx)("div",{className:x,children:(0,b.jsxs)("div",{className:j,children:[(0,b.jsx)("button",{onClick:function(){p(!1)},className:v,children:(0,b.jsx)("b",{children:"X"})}),(0,b.jsx)("p",{children:"You can load photo from your computer:"}),(0,b.jsx)("input",{type:"file",accept:".jpg, .png",onChange:function(t){var o;null!==(o=t.currentTarget.files)&&void 0!==o&&o.length&&(e.savePhoto(t.currentTarget.files[0]),p(!1))}})]})})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{children:e.profile.fullName}),(0,b.jsx)(P,{status:e.status,updateStatus:e.updateStatus,owner:e.profile.userId===e.authId}),(0,b.jsx)("hr",{}),r?(0,b.jsx)(A,{exitFromEditMode:function(t){e.saveProfile(t),i(!1)},profile:e.profile}):(0,b.jsx)(y,{profile:e.profile,owner:e.profile.userId===e.authId,goToEditMode:function(){i(!0)}})]})]})}):(0,b.jsx)(g.p,{})},J=o(81),U=o(2353),Z="MyPosts_postsBlock__PJLR3",E="MyPosts_field__-V4Eg",q="MyPosts_buttonPost__mxBsm",L={item:"Post_item__5qFIu",optionsBtn:"Post_optionsBtn__8-4g2",postText:"Post_postText__e43oC",deleteCommentBtn:"Post_deleteCommentBtn__jMW-1",allCommentsBtn:"Post_allCommentsBtn__FzF-Y"},V=function(e){return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{children:(0,b.jsx)("b",{children:e.commentAuthor})}),e.commentMessage,(0,b.jsx)("button",{className:L.deleteCommentBtn,onClick:function(){return e.deleteComment(e.postId,e.commentId)},children:"\u2716"})]})},Y=l.memo((function(e){return(0,b.jsxs)("div",{className:L.item,children:[(0,b.jsx)("div",{className:L.optionsBtn,children:(0,b.jsx)("button",{onClick:function(){return e.deletePost(e.post.id)},children:(0,b.jsx)(N.J,{iconId:"delete",height:"50",width:"50"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("img",{src:e.photo?e.photo:_,alt:"avatar"}),(0,b.jsx)("span",{children:(0,b.jsx)("b",{children:e.author.name})})]}),(0,b.jsx)("div",{className:L.postText,children:e.post.message}),(0,b.jsx)("div",{className:L.btn,children:(0,b.jsxs)("button",{onClick:function(){return e.likePost(e.post.id)},children:["\u2764\ufe0f ",e.post.likeCounts," "]})}),(0,b.jsx)("div",{children:(0,b.jsx)("ul",{children:e.post.commentIds.map((function(t){return(0,b.jsx)(V,{commentAuthor:e.authorById[e.commentsById[t].authorId].name,commentMessage:e.commentsById[t].message,postId:e.post.id,commentId:t,deleteComment:e.deleteComment},t)}))})}),"1"===e.post.id||"3"===e.post.id?(0,b.jsx)("button",{onClick:function(){return e.fetchComments(e.post.id)},className:L.allCommentsBtn,children:"All comments"}):null]})})),O=function(e){var t;return e?e.length>100&&(t="Post is too large"):t="Text required",t},R=function(e){return(0,b.jsx)(F.J9,{initialValues:{newPost:""},onSubmit:function(t,o){var n={newPost:t.newPost};e.sendPost(n.newPost),o.resetForm(),o.setSubmitting(!1)},children:function(e){var t=e.values,o=e.handleChange,n=e.handleBlur,s=e.handleSubmit,r=e.isSubmitting,i=e.errors;return(0,b.jsxs)("form",{onSubmit:s,children:[(0,b.jsx)(F.gN,{type:"text",name:"newPost",placeholder:"Your news...",onChange:o,onBlur:n,value:t.newPost,className:E,validate:O}),"Post is too large"===i.newPost&&(0,b.jsx)("div",{children:i.newPost}),(0,b.jsx)("div",{className:q,children:(0,b.jsx)("button",{type:"submit",disabled:r,children:"Add Post"})})]})}})},W=l.memo((function(e){var t=e.allIds.map((function(t){return(0,b.jsx)(Y,{photo:e.photo,post:e.postById[t],author:e.authorById[e.postById[t].authorId],commentsById:e.commentsById,authorById:e.authorById,deletePost:e.deletePost,likePost:e.likePost,fetchComments:e.fetchCommentsThunkCreator,deleteComment:e.deleteCommentThunkCreator},t)}));return e.owner?(0,b.jsxs)("div",{className:Z,children:[(0,b.jsx)("h3",{children:"My Posts"}),(0,b.jsx)(R,{sendPost:e.addPost}),(0,b.jsx)("div",{children:t})]}):null})),H=o(7504),K=(0,U.$j)((function(e){var t,o,n;return{allIds:e.profilePage.allIds,postById:e.profilePage.byId,authorById:e.authors.byId,commentsById:e.comments.byId,photo:null===(t=e.profilePage.profile)||void 0===t?void 0:t.photos.small,owner:(null===(o=e.profilePage.profile)||void 0===o?void 0:o.userId)===e.auth.data.id,userName:null===(n=e.profilePage.profile)||void 0===n?void 0:n.fullName}}),(function(e){return{addPost:function(t){e((0,J.Wl)(t,{id:"1",name:"MariyaN23"}))},deletePost:function(t){e((0,J.fu)(t))},likePost:function(t){e((0,J.qU)(t))},fetchCommentsThunkCreator:function(t){e((0,H.u)(t))},deleteCommentThunkCreator:function(t,o){e((0,H.Vi)(t,o))}}}))(W),X=function(e){return(0,b.jsxs)("div",{className:u,children:[(0,b.jsx)(D,{profile:e.profile,status:e.status,updateStatus:e.updateUsersStatusThunkCreator,authId:e.authId,savePhoto:e.savePhotoThunkCreator,saveProfile:e.saveProfileThunkCreator}),(0,b.jsx)(K,{})]})},$=o(7689),z=o(2895),G=o(7781),Q=function(e){(0,i.Z)(o,e);var t=(0,a.Z)(o);function o(){return(0,s.Z)(this,o),t.apply(this,arguments)}return(0,r.Z)(o,[{key:"componentDidMount",value:function(){var e=this.props.params.userId;this.props.getUsersProfileThunkCreator(e),this.props.getUsersStatusThunkCreator(e),this.props.fetchPostsThunkCreator()}},{key:"render",value:function(){return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(X,(0,n.Z)({},this.props))})}}]),o}(l.Component),ee=(0,G.qC)((0,U.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authId:e.auth.data.id}}),{addPost:J.Wl,getUsersProfileThunkCreator:J.L,getUsersStatusThunkCreator:J.X6,updateUsersStatusThunkCreator:J.x7,savePhotoThunkCreator:J.m2,saveProfileThunkCreator:J.Gi,fetchPostsThunkCreator:J.g5}),(function(e){return function(t){var o=(0,$.TH)(),s=(0,$.s0)(),r=(0,$.UO)();return(0,b.jsx)(e,(0,n.Z)((0,n.Z)({},t),{},{location:o,params:r,navigate:s}))}}),z.F)(Q)}}]);
//# sourceMappingURL=21.8c388e79.chunk.js.map