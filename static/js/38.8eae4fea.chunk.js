"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[38],{8038:function(e,t,o){o.r(t),o.d(t,{default:function(){return z}});var n=o(8683),s=o(5671),i=o(3144),r=o(136),a=o(4104),l=o(2791),u="Profile_content__DykmE",c=o(9439),d="ProfileInfo_info__KDdPV",h="ProfileInfo_descriptionBlock__5qaD8",f="ProfileInfo_changeAvatar__Zpx8Y",p="ProfileInfo_status__cYhuP",m="ProfileInfo_noStatus__uhond",x="ProfileInfo_modal__0mBfN",j="ProfileInfo_modalContent__86IY7",v="ProfileInfo_closeModalBtn__8+w7w",g=o(8210),b=o(184),_=function(e){var t=(0,l.useState)(!1),o=(0,c.Z)(t,2),n=o[0],s=o[1],i=(0,l.useState)(e.status),r=(0,c.Z)(i,2),a=r[0],u=r[1];(0,l.useEffect)((function(){u(e.status)}),[e.status]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{children:!n&&(0,b.jsx)("span",{className:e.status?p:m,onDoubleClick:function(){e.owner&&s(!0)},children:e.status&&e.owner?e.status:!e.status&&e.owner?"How you doing?":""})}),(0,b.jsx)("div",{children:n&&(0,b.jsx)("input",{className:p,onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!1),e.updateStatus(a)},value:a})})]})},P=o(1136),k=function(e){return e.contactValue?(0,b.jsxs)("div",{children:[(0,b.jsxs)("b",{children:[e.contactTitle,": "]}),e.contactValue]}):null},N="ProfileData_edit__-EDqJ",w="ProfileData_profileData__UqhRo",C=o(8875),S=function(e){return(0,b.jsxs)(b.Fragment,{children:[e.owner&&(0,b.jsx)("div",{className:N,children:(0,b.jsx)("button",{onClick:e.goToEditMode,children:(0,b.jsx)(C.J,{iconId:"edit",width:"35",height:"35"})})}),(0,b.jsxs)("div",{className:w,children:[(0,b.jsx)("h3",{children:"Info"}),(0,b.jsxs)("p",{children:[(0,b.jsx)("b",{children:"About me: "}),e.profile.aboutMe]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("b",{children:"Looking for a job: "}),e.profile.lookingForAJob?"\u2714\ufe0f":"\u274c"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("b",{children:"My professional skills: "}),e.profile.lookingForAJobDescription]}),Object.values(e.profile.contacts).filter((function(e){return""!==e&&null!==e})).length>0&&(0,b.jsx)("h3",{children:"Contacts:"}),Object.keys(e.profile.contacts).map((function(t){var o;return(0,b.jsx)(k,{contactTitle:t,contactValue:null===(o=e.profile)||void 0===o?void 0:o.contacts[t]},t)}))]})]})},y="ProfileDataForm_fieldError__SASL-",F="ProfileDataForm_error__TM2SS",I="ProfileDataForm_profileForm__dUKr+",T=o(5705),M=function(e){if(!e)return"This field is required"},D=function(e){if(e){return/\./.test(e)?void 0:"Enter correct URL"}},J=function(e){return(0,b.jsx)("div",{children:(0,b.jsx)(T.J9,{initialValues:e.profile,onSubmit:function(t,o){var n=o.setSubmitting,s={fullName:t.fullName,aboutMe:t.aboutMe,lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,contacts:{facebook:t.contacts.facebook,website:t.contacts.website,vk:t.contacts.vk,twitter:t.contacts.twitter,instagram:t.contacts.instagram,youtube:t.contacts.youtube,github:t.contacts.github,mainLink:t.contacts.mainLink}};n(!1),e.exitFromEditMode(s)},children:function(t){var o=t.values,n=t.handleChange,s=t.handleBlur,i=t.handleSubmit,r=t.isSubmitting,a=t.errors;return(0,b.jsxs)(T.l0,{onSubmit:i,className:I,children:[(0,b.jsxs)("label",{children:["Full name ",(0,b.jsx)(T.gN,{type:"text",name:"fullName",onChange:n,onBlur:s,value:o.fullName,className:a.fullName?a.fullName&&y:"",validate:M})]}),(0,b.jsxs)("label",{children:["About me ",(0,b.jsx)(T.gN,{type:"text",name:"aboutMe",onChange:n,onBlur:s,value:o.aboutMe,className:a.aboutMe?a.aboutMe&&y:"",validate:M})]}),(0,b.jsxs)("label",{children:["Looking for a job ",(0,b.jsx)(T.gN,{type:"checkbox",name:"lookingForAJob",checked:o.lookingForAJob})]}),(0,b.jsxs)("label",{children:["My professional skills ",(0,b.jsx)(T.gN,{type:"text",name:"lookingForAJobDescription",onChange:n,onBlur:s,value:o.lookingForAJobDescription,validate:M,className:a.lookingForAJobDescription?a.lookingForAJobDescription&&y:""})]}),Object.keys(e.profile.contacts).map((function(e){return(0,b.jsxs)("label",{children:["".concat(e)," ",(0,b.jsx)(T.gN,{type:"text",name:"contacts.".concat(e),onChange:n,onBlur:s,value:o.contacts[e],validate:D,className:a.contacts?a.contacts[e]&&y:""},e)]})})),a.contacts&&(0,b.jsx)("div",{className:F,children:"Enter correct URL"}),(a.lookingForAJobDescription||a.aboutMe||a.fullName)&&(0,b.jsx)("div",{className:F,children:"This field is required"}),(0,b.jsx)("div",{children:(0,b.jsx)("button",{type:"submit",disabled:r,children:"Save"})})]})}})})},A=function(e){var t,o,n=(0,l.useState)(!1),s=(0,c.Z)(n,2),i=s[0],r=s[1],a=(0,l.useState)(!1),u=(0,c.Z)(a,2),p=u[0],m=u[1];return e.profile?(0,b.jsx)("div",{className:d,children:(0,b.jsxs)("div",{className:h,children:[(0,b.jsxs)("div",{className:f,children:[(0,b.jsx)("img",{src:null!==(t=e.profile)&&void 0!==t&&t.photos.large?null===(o=e.profile)||void 0===o?void 0:o.photos.large:P,alt:"Profile"}),e.profile.userId===e.authId&&(0,b.jsx)("button",{onClick:function(){m(!0)},children:"Change photo"}),e.profile.userId===e.authId&&(0,b.jsx)("div",{children:p&&(0,b.jsx)("div",{className:x,children:(0,b.jsxs)("div",{className:j,children:[(0,b.jsx)("button",{onClick:function(){m(!1)},className:v,children:(0,b.jsx)("b",{children:"X"})}),(0,b.jsx)("p",{children:"You can load photo from your computer:"}),(0,b.jsx)("input",{type:"file",accept:".jpg, .png",onChange:function(t){var o;null!==(o=t.currentTarget.files)&&void 0!==o&&o.length&&(e.savePhoto(t.currentTarget.files[0]),m(!1))}})]})})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{children:e.profile.fullName}),(0,b.jsx)(_,{status:e.status,updateStatus:e.updateStatus,owner:e.profile.userId===e.authId}),(0,b.jsx)("hr",{}),i?(0,b.jsx)(J,{exitFromEditMode:function(t){e.saveProfile(t),r(!1)},profile:e.profile}):(0,b.jsx)(S,{profile:e.profile,owner:e.profile.userId===e.authId,goToEditMode:function(){r(!0)}})]})]})}):(0,b.jsx)(g.p,{})},B=o(81),Z=o(2353),E="MyPosts_postsBlock__PJLR3",U="MyPosts_field__-V4Eg",L="MyPosts_buttonPost__mxBsm",q={item:"Post_item__5qFIu",optionsBtn:"Post_optionsBtn__8-4g2",postText:"Post_postText__e43oC"},V=function(e){var t=(0,l.useState)(0),o=(0,c.Z)(t,2),n=o[0],s=o[1];return(0,b.jsxs)("div",{className:q.item,children:[(0,b.jsx)("div",{className:q.optionsBtn,children:(0,b.jsx)("button",{children:(0,b.jsx)(C.J,{iconId:"options",height:"50",width:"50"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("img",{src:e.photo?e.photo:P,alt:"avatar"}),(0,b.jsx)("span",{children:(0,b.jsx)("b",{children:e.userName})})]}),(0,b.jsx)("div",{className:q.postText,children:e.message}),(0,b.jsx)("div",{className:q.btn,children:(0,b.jsxs)("button",{onClick:function(){return s(n+1)},children:["\u2764\ufe0f ",n," "]})})]})},Y=function(e){var t;return e?e.length>100&&(t="Post is too large"):t="Text required",t},O=function(e){return(0,b.jsx)(T.J9,{initialValues:{newPost:""},onSubmit:function(t,o){var n={newPost:t.newPost};e.sendPost(n.newPost),o.resetForm(),o.setSubmitting(!1)},children:function(e){var t=e.values,o=e.handleChange,n=e.handleBlur,s=e.handleSubmit,i=e.isSubmitting,r=e.errors;return(0,b.jsxs)("form",{onSubmit:s,children:[(0,b.jsx)(T.gN,{type:"text",name:"newPost",placeholder:"Your news...",onChange:o,onBlur:n,value:t.newPost,className:U,validate:Y}),"Post is too large"===r.newPost&&(0,b.jsx)("div",{children:r.newPost}),(0,b.jsx)("div",{className:L,children:(0,b.jsx)("button",{type:"submit",disabled:i,children:"Add Post"})})]})}})},R=l.memo((function(e){var t=e.posts.map((function(t){return(0,b.jsx)(V,{message:t.message,photo:e.photo,owner:e.owner,userName:e.userName},t.id)}));return e.owner?(0,b.jsxs)("div",{className:E,children:[(0,b.jsx)("h3",{children:"My Posts"}),(0,b.jsx)(O,{sendPost:e.addPost}),(0,b.jsx)("div",{children:t})]}):null})),H=(0,Z.$j)((function(e){var t,o,n;return{posts:e.profilePage.posts,photo:null===(t=e.profilePage.profile)||void 0===t?void 0:t.photos.small,owner:(null===(o=e.profilePage.profile)||void 0===o?void 0:o.userId)===e.auth.data.id,userName:null===(n=e.profilePage.profile)||void 0===n?void 0:n.fullName}}),(function(e){return{addPost:function(t){e((0,B.Wl)(t))}}}))(R),K=function(e){return(0,b.jsxs)("div",{className:u,children:[(0,b.jsx)(A,{profile:e.profile,status:e.status,updateStatus:e.updateUsersStatusThunkCreator,authId:e.authId,savePhoto:e.savePhotoThunkCreator,saveProfile:e.saveProfileThunkCreator}),(0,b.jsx)(H,{})]})},W=o(7689),X=o(2895),$=o(7781),G=function(e){(0,r.Z)(o,e);var t=(0,a.Z)(o);function o(){return(0,s.Z)(this,o),t.apply(this,arguments)}return(0,i.Z)(o,[{key:"componentDidMount",value:function(){var e=this.props.params.userId;this.props.getUsersProfileThunkCreator(e),this.props.getUsersStatusThunkCreator(e)}},{key:"render",value:function(){return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(K,(0,n.Z)({},this.props))})}}]),o}(l.Component),z=(0,$.qC)((0,Z.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authId:e.auth.data.id}}),{addPost:B.Wl,getUsersProfileThunkCreator:B.L,getUsersStatusThunkCreator:B.X6,updateUsersStatusThunkCreator:B.x7,savePhotoThunkCreator:B.m2,saveProfileThunkCreator:B.Gi}),(function(e){return function(t){var o=(0,W.TH)(),s=(0,W.s0)(),i=(0,W.UO)();return(0,b.jsx)(e,(0,n.Z)((0,n.Z)({},t),{},{location:o,params:i,navigate:s}))}}),X.F)(G)}}]);
//# sourceMappingURL=38.8eae4fea.chunk.js.map